<!DOCTYPE html>
<html>
  <head>
    <title>The Philosopher Developer</title>
    <meta charset='utf-8' />
    <meta content='initial-scale=1.0, width=device-width, user-scalable=no' name='viewport' />
    <link href='/stylesheets/application.css' rel='stylesheet' />
    <link href='/stylesheets/pygments.css' rel='stylesheet' />
    <script src='http://w.sharethis.com/button/buttons.js' type='text/javascript'></script>
    <script src='/javascripts/ga.js' type='text/javascript'></script>
    <script src='/javascripts/shareThis.js' type='text/javascript'></script>
    <script src='/javascripts/jquery-1.9.1.min.js' type='text/javascript'></script>
    <script src='/javascripts/main.js' type='text/javascript'></script>
    
    <script type='text/javascript' src='/javascripts/posts.js'></script>
  </head>
  <body>
    <header id='header'>
      <h1><a href="/">The Philosopher Developer</a></h1>
      <h2>half-sound logic, half-decent code</h2>
    </header>
    <article class='abbreviated'>
  <header>
    <h1>
      <span class='title'>
        <a href='/posts/magical-optimization-of-the-%2B%3D-operator-with-strings.html'>A magical optimization of the += operator with strings</a>
      </span>
      <span class='date'>August 25, 2012</span>
    </h1>
  </header>
  <section class='content'>
    <p>Today I felt like writing something more low-level than I’ve written in a while… and since C# is about the lowest I go (yeah, pretty sad—I haven’t really earned my beard yet), that will be my language of choice for this post.</p>

<p>But we start with JavaScript, actually. A couple of months ago, shortly after joining <a href="http://www.cardpool.com/">Cardpool</a>–a topic <em>definitely</em> deserving of its own post, in due time—I started working on a top-secret new project. Without giving too much away (as if it really matters), I’ll just say that my work on this project involved writing a library to process a sequence of data from an input device which emulated a computer keyboard. Essentially this input sequence would ultimately be interpreted as a string; but unlike your typical scenario of taking user input from, e.g., a text field—where the string is given to you all at once—in this case the library had to <em>assemble</em> the string from bytes fed to it one-by-one.</p>

<p>In a language like Java or C# (or even Ruby), this would be totally easy, albeit unconventional. The data structure for a string is <a href="/posts/are-strings-really-immutable-in-net.html">more or less</a> immutable in Java and C#, but both have the concept of a mutable <code>StringBuilder</code> for precisely the case where you need to construct a string by concatenating many segments. And in Ruby, strings are mutable to begin with (you use the <code>&lt;&lt;</code> operator to append to an existing string).</p>

<p>But this library I was working on was in <em>JavaScript</em>–a language that I love, but one without any specialized options for concatenating strings quickly. JavaScript strings are immutable, and there is no concept of a <code>StringBuilder</code>. If you want to concatenate many strings together, you have two options:</p>

<ul>
<li>The good ol’ <code>+=</code> operator</li>

<li>Storing the elements in an array, and <span class="post-link">... (<a href="/posts/magical-optimization-of-the-%2B%3D-operator-with-strings.html">read the full post</a>)</span>
</li>
</ul>
  </section>
</article>
<article class='abbreviated'>
  <header>
    <h1>
      <span class='title'>
        <a href='/posts/to-start-over-or-continue.html'>To start over or continue</a>
      </span>
      <span class='date'>June 15, 2012</span>
    </h1>
  </header>
  <section class='content'>
    <p>When I was a kid I played a lot of video games. And there was this funny thing about the way I played them: sometimes, even if the game was going well, I had this impulse to <em>restart</em>. Maybe because I hadn’t played the level perfectly—I had lost some health, or hadn’t collected all the coins, or missed the secret passageway. Or maybe it was just because I liked the beginning of the game so much I wanted to play it again. In any case, it’s an impulse I remember quite clearly, and one which carries over into real life now that I’m an adult.</p>

<p>An interesting byproduct of this tendency of mine to replay levels in video games is that it made me <strong>very good at the early stages</strong>. If I played level X over and over in order to collect all the coins, eventually I would get to a point where I could basically breeze through most of the level. This isn’t altogether too surprising, of course, given the existence of the phrase “practice makes perfect.” But there is a flip side to that coin as well. The more I repeated the early levels of a game, the longer I postponed actually getting to the <em>end</em> of the game; and when I did I was relatively unprepared for it. The final stages always seemed really hard compared to the earlier parts that I repeated so often.</p>

<p>I see a tie-in to this childhood dilemma—fundamentally, to restart or keep going—in the world of software, particularly here in Silicon Valley. In an industry where everyone’s dream seems to be founding a start-up and either bringing it to IPO or getting acquired by some larger company, where a litany of 1-year engagements at VC-funded and possibly failed start-ups is <span class="post-link">... (<a href="/posts/to-start-over-or-continue.html">read the full post</a>)</span></p>
  </section>
</article>
<article class='abbreviated'>
  <header>
    <h1>
      <span class='title'>
        <a href='/posts/trouble-with-stop-the-line-ci.html'>The trouble with stop-the-line CI</a>
      </span>
      <span class='date'>May 07, 2012</span>
    </h1>
  </header>
  <section class='content'>
    <p><a href="http://en.wikipedia.org/wiki/Continuous_integration">Continuous Integration</a> is a powerful technique used by a growing number of software teams. Personally, I have issues with the way CI is done on a lot of software projects. I’ve <a href="/posts/being-agile-with-continuous-integration.html">tried to write about this once before</a>, but at the time the ideas bouncing around in my head hadn’t really crystalized. To be honest, they <em>still</em> haven’t fully (if you’ve ever worked and/or debated with me, you’d be right to wonder if they ever will); but I figured it was time to give it another shot anyway. And in typical me fashion, I’d like to start with an analogy.</p>

<h2 id="the_puzzled_factory_owner_1">The Puzzled Factory Owner</h2>

<p>Imagine a factory owner wants to reduce the occurrence of defects and thereby improve the consistency and quality of the products manufactured at his factory. So he brings in an expert, who advises him there’s a new technique called “Constant Validation” –or CV for short—that can notify him whenever a defect is found. This sounds great to the factory owner, so he decides to install CV at his factory immediately.</p>

<p>Before he leaves, the expert also informs the owner that he should have his workers stop whenever a defect is found and wait for it to be resolved before resuming work. Otherwise, tracing the defect back to its source can become very difficult, as additional errors might be introduced during the investigation. This makes a lot of sense to the factory owner; he thanks the expert for his time and bids him farewell.</p>

<p>Initially, business is going well for the factory owner. The CV system enables him to react as soon as a defect is found, taking corrective action at once to prevent further damages. For the first couple of weeks following the CV installation, he is extremely pleased with his investment.</p>

<p>Over time, however, <span class="post-link">... (<a href="/posts/trouble-with-stop-the-line-ci.html">read the full post</a>)</span></p>
  </section>
</article>
<article class='abbreviated'>
  <header>
    <h1>
      <span class='title'>
        <a href='/posts/littlest-ruby-debugger.html'>The littlest Ruby debugger</a>
      </span>
      <span class='date'>March 16, 2012</span>
    </h1>
  </header>
  <section class='content'>
    <p>It is a well-known fact among my teammates that my tolerance for hacks is higher than most developers’. And so it is that sometimes I write code that others find horrifying.</p>

<p>Here’s one that I personally like, and which has caused more than one of my teammates to chuckle in half-approval. It came up again just today, as we are using <a href="http://www.padrinorb.com/">Padrino</a> on my current project and a coworker wanted to know if Sinatra and/or Padrino had an equivalent to the Rails console (to allow a dev to poke around the system at some arbitrary point during the program’s execution—say, in the middle of handling a request at the controller level).</p>

<p>Frankly, I’m no Sinatra expert. For all I know there <em>is</em> an equivalent to the Rails console in Sinatra. I’ve never really cared, because if I want to poke around the code mid-request I just whip up something like this, which I shall call the <strong>littlest Ruby debugger</strong>:</p>

<div class="highlight"><pre><span class="nb">puts</span> <span class="s2">"Start typing away."</span>
<span class="k">while</span> <span class="p">(</span><span class="n">line</span> <span class="o">=</span> <span class="no">STDIN</span><span class="o">.</span><span class="n">readline</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span> <span class="o">!=</span> <span class="s2">""</span>
  <span class="nb">puts</span> <span class="nb">eval</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>

<p>Yes, yes, I know. Any developer who lets something like that slip into production code deserves to be shot. But I would honestly argue that the chances of that are so close to zero as to be completely unworthy of any serious consideration.</p>

<p>Here’s an example of the above hack in action, responding to a request on my local machine (with my commands highlighted):</p>
<pre>  DEBUG -      GET (0.0120ms) /layouts/ - 200
0:0:0:0:0:0:0:1%0 - - [16/Mar/2012 16:22:44] "GET /layouts/ HTTP/1.1" 200 - 0.0160
Start typing away.
<span class="highlight-special">params.inspect</span>
{:layout_id=&gt;"1"}
<span class="highlight-special">params[:layout_id]</span>
1
<span class="highlight-special">self.methods.select { |m| m.start_with?("c") }</span>
current_user
cache_action
check_box_tag
content_tag
content_for
concat_content
content_for?
concat
capture_html
capture
content_blocks
content_type
current_engine
current_path
call!
call
coffee
creole
cache_control
client_error?
com
class
clone
class_eval

  DEBUG - TEMPLATE (0.0010ms) /layouts/application
  DEBUG -      GET</pre> <span class="post-link">... (<a href="/posts/littlest-ruby-debugger.html">read the full post</a>)</span>
  </section>
</article>
<article class='abbreviated'>
  <header>
    <h1>
      <span class='title'>
        <a href='/posts/optimizing-mind.html'>The Optimizing Mind</a>
      </span>
      <span class='date'>February 19, 2012</span>
    </h1>
  </header>
  <section class='content'>
    <p>I noticed something funny about myself this morning while making coffee.</p>
    
    <p>The kitchen in my wife’s and my apartment is divided into a main area and a <a href="http://en.wikipedia.org/wiki/Scullery_(room)">scullery</a> (yep, we’re old fashioned). The scullery holds our silverware, dishes, coffee, tea, and other things. But the coffee <em>maker</em> is in the main area, on a cart.</p>
    
    <p>This morning I went into the kitchen, put a filter in the coffee maker, took the carafe and brought it with me into the scullery. In the scullery I filled the carafe with water, took the coffee and walked back to the cart in the kitchen. I filled the machine with enough water for two cups of coffee, collected an emptied sugar packet that was sitting on the cart, and tossed it into the trash on my way back to the scullery, where I poured out the excess water from the carafe and picked up a mug and a spoon before heading back to the cart.</p>
    
    <p>What I noticed about this whole procedure (after having gone through it, of course) is that I had <strong>optimized</strong> my trips to and from the scullery—not perfectly, by any means, but to some extent. That is, rather than making a trip for one purpose (e.g., filling the carafe with water), I <em>combined</em> tasks so as to reduce the total number of trips back and forth. And what was particularly noteworthy to me was that I had done this <em>without really thinking about it</em>.</p>
    
    <p>Recently I interviewed an engineer for ThoughtWorks. It was a technical phone interview, so much of the conversation was relatively high-level (I figured, save the whiteboard problems for in-office interviews). Even so, I did throw in a few problems, emphasizing to the candidate that the goal of the exercise was for her to share <span class="post-link">... (<a href="/posts/optimizing-mind.html">read the full post</a>)</span></p>
  </section>
</article>
<div class='next-page'>
  <a href='/index5.html'>View older posts</a>
</div>
    <footer>
      <ul class='menu'>
        <li><a href="/posts">All Posts</a></li>
        <li><a href="/about">About</a></li>
        <li>
          <a href='http://stackoverflow.com/users/105570' target='_blank'>
            <img alt='StackOverflow' src='/images/icons/stackoverflow-small.png' />
          </a>
        </li>
        <li>
          <a href='https://github.com/dtao' target='_blank'>
            <img alt='GitHub' src='/images/icons/github-small.png' />
          </a>
        </li>
        <li>
          <a href='https://twitter.com/dan_tao' target='_blank'>
            <img alt='Twitter' src='/images/icons/twitter-small.png' />
          </a>
        </li>
        <li>
          <a href='http://feeds.feedburner.com/philosopherdeveloper'>
            <img alt='RSS' src='/images/icons/rss-small.png' />
          </a>
        </li>
      </ul>
    </footer>
  </body>
</html>
