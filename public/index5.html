<!DOCTYPE html>
<html>
  <head>
    <title>The Philosopher Developer</title>
    <meta charset='utf-8' />
    <meta content='initial-scale=1.0, width=device-width, user-scalable=no' name='viewport' />
    <link href='/stylesheets/application.css' rel='stylesheet' />
    <link href='/stylesheets/pygments.css' rel='stylesheet' />
    <script src='http://w.sharethis.com/button/buttons.js' type='text/javascript'></script>
    <script src='/javascripts/ga.js' type='text/javascript'></script>
    <script src='/javascripts/shareThis.js' type='text/javascript'></script>
    <script src='/javascripts/jquery-1.9.1.min.js' type='text/javascript'></script>
    <script src='/javascripts/main.js' type='text/javascript'></script>
    
    <script type='text/javascript' src='/javascripts/posts.js'></script>
  </head>
  <body>
    <header id='header'>
      <h1><a href="/">The Philosopher Developer</a></h1>
      <h2>half-sound logic, half-decent code</h2>
    </header>
    <article class='abbreviated'>
  <header>
    <h1>
      <span class='title'>
        <a href='/posts/trick-to-good-ballpark-estimates.html'>The trick to good ballpark estimates</a>
      </span>
      <span class='date'>February 02, 2012</span>
    </h1>
  </header>
  <section class='content'>
    <p>When I was younger my grandpa taught me and my sister a little trick. He said to me, “I can calculate how many hairs are on your sister’s head.” It seemed preposterous to my young mind; the number was surely so astronomical as to be beyond any intelligent guess. But I was curious.</p>

<p>What my grandpa did was to start with individual hairs. He counted 1, 2, up to ten, and held that many strands between two fingers. “This is ten,” he said. Then, using roughly that many strands now as a unit, he counted out 9 more units of similar size, collecting them between the same two fingers. He now held roughly ten times the number of hairs from before. “This,” he said, very seriously as he wanted to make sure we were paying attention, “is about a hundred.”</p>

<p>I may have been a kid, but I immediately saw where he was going. Next, he counted by approximate hundreds, covering more and more area on my sister’s head. He didn’t have to keep holding it all between his fingers; it became reasonable at a certain point (maybe 100, maybe 1000) to eyeball it.</p>

<p>Of course, I have no memory of what the actual end result was. And obviously, it was not a precisely accurate number. But there’s no doubt in my mind that it was an <strong>accurate ballpark</strong> estimate. My grandpa never studied human anatomy, but he figured out within an order of magnitude how many hairs were on my head with <strike>a minimal</strike> an <em>optimal</em> amount of effort.</p>

<p>Often, in software, ballpark estimates are exactly what we want. Particularly in your stereotypical “agile” project, where the client understands that absolute estimates are tough to produce but relative estimates are easy and that’s why we use story points, <em>yada</em> <span class="post-link">... (<a href="/posts/trick-to-good-ballpark-estimates.html">read the full post</a>)</span></p>
  </section>
</article>
<article class='abbreviated'>
  <header>
    <h1>
      <span class='title'>
        <a href='/posts/am-i-being-obnoxious.html'>Am I being obnoxious?</a>
      </span>
      <span class='date'>January 31, 2012</span>
    </h1>
  </header>
  <section class='content'>
    <p>I’ve noticed I tend to have two conflicting inclinations in a lot of day-to-day situations at work:</p>
    
    <ol>
    <li>I have a lot of opinions about how things could be done better</li>
    
    <li>I strongly believe that in order to effect change, it’s important not to turn people against you</li>
    </ol><p>The latter seems like a no-brainer, and yet it frequently gets in the way of the former.</p>
    
    <p>For example, I often participate in meetings during which the discussion becomes derailed on a side tangent, or the group loses focus making jokes or telling stories. Sometimes one-on-one dialogues emerge while the rest of the room sits quietly, waiting politely for the two individuals who are monopolizing the meeting to check themselves. Invariably, <em>after</em> meetings such as this there are grumblings amongst a few of the participants about how unnecessarily long and pointless the meeting was. (Though I’m not proud of it, I am generally a part of this group.)</p>
    
    <p>Why should this happen? I ask myself this on a regular basis. It seems that if not one but <em>multiple</em> people are aware that the meeting is veering off track, or that it is somehow not running effectively, surely someone ought to speak up. But no one does, and it’s because of the second point above. Speaking for myself, at least, I don’t want to disrupt the flow of things just to voice my discontent at how the conversation is progressing. I could do more damage than good. People might get defensive. I could inadvertently harm team morale. Besides, just because <em>I</em> am not engaged in the conversation, that doesn’t mean it’s a waste of <em>everyone’s</em> time.</p>
    
    <p>Of course, these fears reflect a risk-averse attitude that is perhaps not particularly beneficial to whatever project I’m on. In general, I do think it’s valuable to ask <span class="post-link">... (<a href="/posts/am-i-being-obnoxious.html">read the full post</a>)</span></p>
  </section>
</article>
<article class='abbreviated'>
  <header>
    <h1>
      <span class='title'>
        <a href='/posts/being-agile-with-continuous-integration.html'>Being agile with continuous integration</a>
      </span>
      <span class='date'>January 27, 2012</span>
    </h1>
  </header>
  <section class='content'>
    <p>Something’s been stirring around in my head lately, and it’s going to seem somewhat heretical to those firmly planted in a particular school of thought. Essentially I’ve been questioning the way continuous integration is done on some of the software projects I’ve seen, at ThoughtWorks and elsewhere.</p>
    
    <p>More broadly, I guess my skepticism isn’t specifically about continuous integration, but rather about test-driven development with TDD and, more importantly, BDD (i.e., with a language like Gherkin/Cucumber for defining feature requirements and a UI automation tool such as Selenium for driving acceptance tests).</p>
    
    <p>To be clear, I view TDD and BDD as extremely useful techniques; and CI is a powerful tool to maximize their effectiveness. I would even accept that we are better off using a test-driven approach for 100% of development than we would be if we used no TDD. But that isn’t the same as saying 100% TDD is optimal or that we should get started with BDD immediately on every project. Like most everything else in life, I believe it is ultimately a matter of achieving the right balance, which requires good judgment.</p>
    
    <p>As a bit of background, I have had conversations with colleagues who have agreed with me that sometimes testing is not necessary or appropriate. The attitude I have picked up as a general rule of thumb is that for spiking out software prototypes—throwaway versions that we acknowledge in advance will probably differ dramatically from any actual release—we can often move faster by coding features without testing them. TDD might still be useful in this context, however, as one of its benefits is that it assists the developer in thinking through the implementation of a tricky piece of logic. But its usefulness here is actually in <em>increasing</em> development speed (which is important for a prototype), not in <span class="post-link">... (<a href="/posts/being-agile-with-continuous-integration.html">read the full post</a>)</span></p>
  </section>
</article>
<article class='abbreviated'>
  <header>
    <h1>
      <span class='title'>
        <a href='/posts/ghost-clicks-in-jquery-mobile.html'>Ghost clicks in jQuery Mobile</a>
      </span>
      <span class='date'>November 01, 2011</span>
    </h1>
  </header>
  <section class='content'>
    <p>I know it’s been a long time since I’ve written (<em>especially</em> for someone who’s repeatedly claimed he will write daily posts). I’ve got some more substantial ideas to discuss in the near future (honest!)<strike>, but this particular post is going to be a short one</strike>. [Correction: this post ended up being kinda long.]</p>

<p>On my current project we’re in the process of wrapping up a mobile website we built using <a href="http://jquerymobile.com/">jQuery Mobile</a>. One issue we encountered during development was that on certain pages, a strange “ghost click” behavior was observed: the user would click a button, the page would change, and then a button on the destination page (positioned at the same location as the original button) would seem to be automatically clicked as if the user had clicked twice—or as if a <em>ghost</em> had clicked it.</p>

<p>It turns out that this is a known issue for mobile web browsers, which <a href="http://code.google.com/mobile/articles/fast_buttons.html">Google wrote about back in January</a>. In the article, Ryan Fioravanti explains that most mobile browsers introduce a delay of ~300 ms before every <code>click</code> event, for the reason that they want to account for the possibility that the user might be double-clicking to zoom in on the page. So what can happen on a mobile web project this:</p>

<ul>
<li>Someone notices that the UI seems sluggish. In particular, clicking on buttons feels very slow.</li>

<li>A developer looks into the problem and finds that the issue can be mitigated by handling an event other than <code>click</code>, such as <code>touchstart</code> (jQuery Mobile has a <code>vclick</code> event).</li>

<li>Now that the clickable element in question handles a non-<code>click</code> event, when it is clicked, <strong>there is still a <code>click</code> event waiting to be triggered within the next ~300 ms</strong>; and so if a page <span class="post-link">... (<a href="/posts/ghost-clicks-in-jquery-mobile.html">read the full post</a>)</span>
</li>
</ul>
  </section>
</article>
<article class='abbreviated'>
  <header>
    <h1>
      <span class='title'>
        <a href='/posts/how-i-discovered-a-bug-in-the-csharp-compiler-part-2.html'>How I discovered a bug in the C# compiler, part 2</a>
      </span>
      <span class='date'>April 03, 2011</span>
    </h1>
  </header>
  <section class='content'>
    <p>This post continues from where <a href="http://philosopherdeveloper.wordpress.com/2011/03/31/how-i-discovered-a-bug-in-the-c-compiler-part-1/">my last one</a> left off; but don’t worry—I swear I’ll make this one more less rambling and more comprehensible. And rest assured that I will actually get to the explanation this time!</p>

<p>So where did we leave off? We witnessed some truly bizarre behavior of a <strong>mutable value type</strong> within a <strong>using statement</strong> which also happens to include a <strong>closure</strong>. What does this look like?</p>

<p>How about instead of using a custom value type to illustrate, this time I’ll show you what I mean with a type straight from the BCL itself (meaning, this guy was written by Microsoft folks, so you know it’s not just something weird about the way <em>I</em> did things):</p>

<div class="highlight"><pre><span class="kt">var</span> <span class="n">list</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="p">{</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span> <span class="p">};</span>

<span class="c1">// Criterion 1: within a using statement...</span>
<span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">e</span> <span class="p">=</span> <span class="n">list</span><span class="p">.</span><span class="n">GetEnumerator</span><span class="p">())</span>
<span class="p">{</span>
    <span class="c1">// Criterion 2: ...which includes a closure...</span>
    <span class="n">Func</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">closure</span> <span class="p">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="n">e</span><span class="p">.</span><span class="n">Current</span><span class="p">;</span>
    
    <span class="c1">// Criterion 3: ...a mutable value type...</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">MoveNext</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">Current</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><strong>What do you think the above program will print?</strong></p>

<p>Well, if you were paying <em>attention</em> to my last post (and if not—honestly, I totally understand), you’d know the answer already. The above program outputs:</p>

<pre><code>0
0
0
0
0</code></pre>

<p>…and on and on, ad infinitum.</p>

<p>Remember, this happens <em>specifically</em> when all three of the above criteria (reiterated in the code comments) are met. It does <em>not</em> happen when only one or two of those criteria are met.</p>

<p>Now let’s get to the bottom of this. In order to do so, there are a few puzzle pieces we need to understand.</p>

<h2 id="puzzle_piece_1_how_does_the_c_compiler_implement_closures_1">Puzzle Piece #1: How does the C# compiler implement closures?</h2>

<p>This one’s a head-scratcher for a lot of C# developers who’ve never really looked into the inner workings of closures. I’d <span class="post-link">... (<a href="/posts/how-i-discovered-a-bug-in-the-csharp-compiler-part-2.html">read the full post</a>)</span></p>
  </section>
</article>
<div class='next-page'>
  <a href='/index6.html'>View older posts</a>
</div>
    <footer>
      <ul class='menu'>
        <li><a href="/posts">All Posts</a></li>
        <li><a href="/about">About</a></li>
        <li>
          <a href='http://stackoverflow.com/users/105570' target='_blank'>
            <img alt='StackOverflow' src='/images/icons/stackoverflow-small.png' />
          </a>
        </li>
        <li>
          <a href='https://github.com/dtao' target='_blank'>
            <img alt='GitHub' src='/images/icons/github-small.png' />
          </a>
        </li>
        <li>
          <a href='https://twitter.com/dan_tao' target='_blank'>
            <img alt='Twitter' src='/images/icons/twitter-small.png' />
          </a>
        </li>
        <li>
          <a href='http://feeds.feedburner.com/philosopherdeveloper'>
            <img alt='RSS' src='/images/icons/rss-small.png' />
          </a>
        </li>
      </ul>
    </footer>
  </body>
</html>
