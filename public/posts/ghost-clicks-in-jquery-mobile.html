<!DOCTYPE html>
<html>
  <head>
    <title>Ghost clicks in jQuery Mobile - The Philosopher Developer</title>
    <meta charset='utf-8' />
    <meta content='initial-scale=1.0, width=device-width, user-scalable=no' name='viewport' />
    <link href='/stylesheets/application.css' rel='stylesheet' />
    <link href='/stylesheets/pygments.css' rel='stylesheet' />
    <script src='http://w.sharethis.com/button/buttons.js' type='text/javascript'></script>
    <script src='/javascripts/ga.js' type='text/javascript'></script>
    <script src='/javascripts/shareThis.js' type='text/javascript'></script>
    <script src='/javascripts/jquery-1.9.1.min.js' type='text/javascript'></script>
    <script src='/javascripts/main.js' type='text/javascript'></script>
    <script type='text/javascript'>
      //<![CDATA[
        var disqus_shortname = "philosopherdeveloper";
        var disqus_identifier = "ghost-clicks-in-jquery-mobile";
        var disqus_title = "Ghost clicks in jQuery Mobile";
      //]]>
    </script>
    
  </head>
  <body>
    <header id='header'>
      <h1>
        <a href='/posts/ghost-clicks-in-jquery-mobile.html'>Ghost clicks in jQuery Mobile</a>
      </h1>
      <h2><a href="/">the philosopher developer</a></h2>
    </header>
    <article>
  <header>
    <h1>
      November 01, 2011
      <span class='comments'><a href='#disqus_thread' data-disqus-identifier='ghost-clicks-in-jquery-mobile'></a></span>
      <script src='/javascripts/disqusCount.js' type='text/javascript'></script>
    </h1>
    <div class='social'>
      <span class='st_facebook_hcount' displayText='Facebook'></span>
      <span class='st_googleplus_hcount' displayText='Google+'></span>
      <span class='st_twitter_hcount' displayText='Tweet'></span>
      <span class='st_linkedin_hcount' displayText='LinkedIn'></span>
    </div>
  </header>
  <section class='content'>
    <p>I know it’s been a long time since I’ve written (<em>especially</em> for someone who’s repeatedly claimed he will write daily posts). I’ve got some more substantial ideas to discuss in the near future (honest!)<strike>, but this particular post is going to be a short one</strike>. [Correction: this post ended up being kinda long.]</p>

<p>On my current project we’re in the process of wrapping up a mobile website we built using <a href="http://jquerymobile.com/">jQuery Mobile</a>. One issue we encountered during development was that on certain pages, a strange “ghost click” behavior was observed: the user would click a button, the page would change, and then a button on the destination page (positioned at the same location as the original button) would seem to be automatically clicked as if the user had clicked twice—or as if a <em>ghost</em> had clicked it.</p>

<p>It turns out that this is a known issue for mobile web browsers, which <a href="http://code.google.com/mobile/articles/fast_buttons.html">Google wrote about back in January</a>. In the article, Ryan Fioravanti explains that most mobile browsers introduce a delay of ~300 ms before every <code>click</code> event, for the reason that they want to account for the possibility that the user might be double-clicking to zoom in on the page. So what can happen on a mobile web project this:</p>

<ul>
<li>Someone notices that the UI seems sluggish. In particular, clicking on buttons feels very slow.</li>

<li>A developer looks into the problem and finds that the issue can be mitigated by handling an event other than <code>click</code>, such as <code>touchstart</code> (jQuery Mobile has a <code>vclick</code> event<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>).</li>

<li>Now that the clickable element in question handles a non-<code>click</code> event, when it is clicked, <strong>there is still a <code>click</code> event waiting to be triggered within the next ~300 ms</strong>; and so if a page change occurs, an element on the next page could very well be ghost-clicked.</li>
</ul><p>It’s worth noting that this behavior is also found in <em>any</em> software that supports double-clicking, including basically every popular desktop OS. The <em>difference</em> is in the <strong>time interval</strong>: it’s far easier to click twice quite rapidly using a mouse (or touchpad) <strong>with your pointer finger</strong> than it is to tap twice quickly on a touchscreen <strong>with your thumb</strong>. My understanding is that on Windows, for example, the lag time for double clicks is somewhere in the vicinity of 70 ms (don’t quote me on that), which is relatively imperceptible for most people, as our <a href="http://en.wikipedia.org/wiki/Mental_chronometry">reaction time</a>—and hence the time it takes us to notice things—is <a href="http://www.humanbenchmark.com/tests/reactiontime/index.php">apparently something like 200 ms</a>. (Mine is a rather embarrassing 250 ms. Then again maybe that’s just because I’m running low on coffee.)</p>

<p>But 300 ms is actually a noticeable period of time. And so this delay introduced by mobile browsers dooms websites that rely exclusively on the <code>click</code> event to feel slightly less responsive than those that explore other means of handling clicks. This is especially frustrating to developers as it is <em>only</em> reproducible on actual devices, not in simulators and therefore not in automated acceptance tests.</p>

<p>It would actually have been nice if mobile browsers supported an option to disable this click delay. After all, the whole reason the delay is there in the first place is to support zooming in, which doesn’t really make sense for sites with interfaces designed for mobile devices in the first place (such as sites using JQM). Maybe at some point in the future browsers <em>will</em> come to support this option.</p>

<p>In the meantime, ghost clicks are something to be aware of. For the purpose of improving perceived performance, I still recommend finding alternatives to the <code>click</code> event such as JQM’s <code>vclick</code>; but when these alternatives end up introducing ghost clicks, the fastest fix is simply to go back to <code>click</code> for the offending element(s).</p>
<div class="footnotes">
<hr>
<ol><li id="fn:1">
<p>If you look at the source code for jQuery Mobile, you see that they actually tried to implement a “ghost click buster” much like Google suggests in the article. While I can’t comment on this in much detail, based on our experience on my current project their valiant efforts appear to be fairly unreliable. That is, avoiding the ghost click by any means other than simply handling <code>click</code> after all is not so easy. <a href="#fnref:1" rev="footnote">↩</a></p>
</li></ol>
</div>
    <div class='navigation'>
      <a class='previous' href='/posts/how-i-discovered-a-bug-in-the-csharp-compiler-part-2.html'>How I discovered a bug in the C# compiler, part 2</a>
      <a class='next' href='/posts/being-agile-with-continuous-integration.html'>Being agile with continuous integration</a>
    </div>
  </section>
  <section class='comments'>
    <div id='disqus_thread'></div>
    <script src='/javascripts/disqus.js' type='text/javascript'></script>
    <noscript>
      Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
    </noscript>
    <a class='dsq-brlink' href='http://disqus.com'>
      comments powered by
      <span class='logo-disqus'>Disqus</span>
    </a>
  </section>
</article>
    <footer>
      <ul class='menu'>
        <li><a href="/posts">All Posts</a></li>
        <li><a href="/about">About</a></li>
        <li>
          <a href='http://stackoverflow.com/users/105570' target='_blank'>
            <img alt='StackOverflow' src='/images/icons/stackoverflow-small.png' />
          </a>
        </li>
        <li>
          <a href='https://github.com/dtao' target='_blank'>
            <img alt='GitHub' src='/images/icons/github-small.png' />
          </a>
        </li>
        <li>
          <a href='https://twitter.com/dan_tao' target='_blank'>
            <img alt='Twitter' src='/images/icons/twitter-small.png' />
          </a>
        </li>
        <li>
          <a href='http://feeds.feedburner.com/philosopherdeveloper'>
            <img alt='RSS' src='/images/icons/rss-small.png' />
          </a>
        </li>
      </ul>
    </footer>
  </body>
</html>
